def solution(order):
    s = []  # 보조 컨테이너
    cnt = 0  # 트럭에 적재한 상자 개수
    idx = 0  # order에서 현재 순서의 상자를 가리키는 인덱스
    i = 1  # 상자 번호 (1번 상자부터 시작)
    
    # 첫 번째 루프: 상자들을 처리하며 트럭에 적재할 수 있을 때 적재
    while i <= len(order):
        if i == order[idx]:  # 상자 번호가 order와 일치하면
            cnt += 1  # 트럭에 적재
            idx += 1  # 다음 순서로 이동
            i += 1  # 다음 상자 번호로 이동
        elif s and s[-1] == order[idx]:  # 보조 컨테이너에서 트럭에 적재 가능한 경우
            s.pop()  # 보조 컨테이너에서 상자를 꺼내 트럭에 적재
            cnt += 1  # 적재한 상자 개수 증가
            idx += 1  # 다음 순서로 이동
        else:  # 위 조건을 만족하지 않으면 상자를 보조 컨테이너에 저장
            s.append(i)
            i += 1  # 다음 상자 번호로 이동
    
    # 두 번째 루프: 남아있는 보조 컨테이너에서 적재할 수 있는 상자를 트럭에 적재
    while s:
        if s[-1] == order[idx]:  # 보조 컨테이너의 상자가 트럭 순서와 일치하면
            s.pop()  # 적재
            cnt += 1  # 적재한 상자 개수 증가
            idx += 1  # 다음 순서로 이동
        else:  # 순서와 맞지 않으면 중단
            break
    
    return cnt
